<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <title><ui:insert name="title">Tableau de bord Admin</ui:insert></title>
    <h:outputStylesheet library="primefaces" name="primeicons/primeicons.css" />
    <h:outputStylesheet library="webjars" name="bootstrap/5.3.3/css/bootstrap.min.css" />
    <h:outputStylesheet name="css/style.css" />
    <style>
        .sidebar {
            transition: width 0.3s ease-in-out;
            width: 250px;
        }
        .sidebar.collapsed {
            width: 70px;
        }
        .sidebar.collapsed .sidebar-text {
            display: none;
        }
        .sidebar .nav-link {
            white-space: nowrap;
        }
        /* Style pour aligner le contenu */
        .content-container {
            flex-grow: 1; /* Permet au contenu de prendre l'espace restant */
            overflow: auto; 
            padding: 20px;
        }
    </style>
</h:head>
<h:body>
	<div id="header">
        <ui:include src="/templates/menu.xhtml" />
    </div>
    <div class="d-flex flex-nowrap" id="wrapper">
        <div class="border-end bg-light sidebar" id="sidebar-wrapper">
            <div class="sidebar-heading border-bottom bg-light">
                <a href="/Memoire" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-decoration-none">
                    <i class="pi pi-bars me-2" id="sidebar-toggle"></i>
                    <span class="fs-5 d-none d-sm-inline sidebar-text">Admin Menu</span>
                </a>
            </div>
            <div class="list-group list-group-flush">
                <h:link outcome="/admin/dashboardAdmin.xhtml" styleClass="list-group-item list-group-item-action p-3">
                    <i class="pi pi-th-large me-2"></i> <span class="sidebar-text">Dashboard</span>
                </h:link>
                <a href="#submenu1" data-bs-toggle="collapse" class="list-group-item list-group-item-action p-3">
                    <i class="pi pi-users me-2"></i> <span class="sidebar-text">Utilisateurs</span>
                </a>
                <div class="collapse" id="submenu1">
                    <h:link outcome="/admin/gererAgents.xhtml" styleClass="list-group-item list-group-item-action ps-5">
                        <span class="sidebar-text">Gérer les Agents</span>
                    </h:link>
                    <h:link outcome="/admin/gererMedecins.xhtml" styleClass="list-group-item list-group-item-action ps-5">
                        <span class="sidebar-text">Gérer les Médecins</span>
                    </h:link>
                </div>
                <h:link outcome="/admin/rapports.xhtml" styleClass="list-group-item list-group-item-action p-3">
                    <i class="pi pi-chart-line me-2"></i> <span class="sidebar-text">Rapports</span>
                </h:link>
                <h:link outcome="/admin/changePassword.xhtml" styleClass="list-group-item list-group-item-action p-3">
                    <i class="pi pi-key me-2"></i> <span class="sidebar-text">Changer le mot de passe</span>
                </h:link>
            </div>
        </div>
        
        <div class="content-container py-3">
            <main class="py-3">
                <ui:insert name="content" />
            </main>
        </div>
    </div>

    <h:outputScript library="webjars" name="bootstrap/5.3.3/js/bootstrap.bundle.min.js" />
    <h:outputScript>
        // Script pour gérer le basculement du menu
        document.getElementById('sidebar-toggle').addEventListener('click', function (e) {
            e.preventDefault();
            document.getElementById('wrapper').classList.toggle('toggled');
            document.getElementById('sidebar-wrapper').classList.toggle('collapsed');
        });
    </h:outputScript>
</h:body>
</html>